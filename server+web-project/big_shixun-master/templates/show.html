<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../static/css/show.css">
    <script src="../static/js/echarts.min.js"></script>
    <script>
    var data='{{ v }}';

    console.log(data)
     setInterval(function () {
        var PValue='{{ v[2][1] }}'
        var HValue='{{ v[0][1] }}'
        var TValue='{{ v[3][1] }}'
        var LValue='{{ v[1][1] }}'
        <!--console.log(PValue);-->
        <!--console.log(HValue);-->
        <!--console.log(TValue);-->
        <!--console.log(LValue);-->
        },2000);
    </script>
</head>

<body>
    <div id="main">
        <div class="background"><img src="../static/images/bg.jpg" width="100%" height="100%"></div>
        <div class="header">物联网可视化数据</div>
        <div class='theBody'>
        <div class="left">
            <div class="small">
                <span>温度</span>
                <div id="echart1" style="width: 275px;height:275px;margin: 0 auto;" ></div>
            </div>
            
            <div class="small">
                <span>压力</span>
                <div id="echart2" style="width: 275px;height:275px;margin: 0 auto;" ></div>
            </div>
    
            <div class="small">
                <span>湿度</span>
                <div id="echart3" style="width: 275px;height:275px;margin: 0 auto;" ></div>
            </div>
        </div>
        <div class="right">
            <div id="echart4" class="large"></div>
        </div> 
        </div>
    </div>

</body>
<!--<script src="../static/js/chart1.js"></script>-->
<!--<script src="../static/js/chart2.js"></script>-->
<!--<script src="../static/js/chart3.js"></script>-->
<!--<script src="../static/js/chart4.js"></script>-->
<script>
var myChart = echarts.init(document.getElementById('echart1'));
var myChart2 = echarts.init(document.getElementById('echart2'));
var myChart3 = echarts.init(document.getElementById('echart3'));
var myChart4 = echarts.init(document.getElementById('echart4'));
const option = {
    series: [
        {
            type: 'gauge',
            min: 0,
            max: 300,
            progress: {
                show: true,
                width: 28
            },
            axisLine: {
                lineStyle: {
                    width: 28
                }
            },

            splitLine: {
                length: 25,
                distance: 0,
                lineStyle: {
                    width: 2,
                    color: '#999'
                }
            },
            axisLabel: {
                distance: 20,
                color: '#999',
                fontSize: 15,
                distance:-50
            },
            anchor: {
                show: true,
                showAbove: false,
                size: 10,
                itemStyle: {
                    borderWidth: 10
                }
            },
            title: {
                show: true,
            },
            detail: {
                valueAnimation: false,
                fontSize: 20,
                offsetCenter: [0, '70%'],
                formatter: '{value}℃'
            },
            data: [
                {
                    value: 0
                }
            ]
        }
    ]
};

const option2 = {
    series: [
        {
            type: 'gauge',
            min: 0,
            max: 1000,
            progress: {
                show: true,
                width: 28
            },
            axisLine: {
                lineStyle: {
                    width: 28
                }
            },

            splitLine: {
                length: 25,
                distance: 0,
                lineStyle: {
                    width: 2,
                    color: '#999'
                }
            },
            axisLabel: {
                distance: 20,
                color: '#999',
                fontSize: 15,
                distance:-50
            },
            anchor: {
                show: true,
                showAbove: false,
                size: 10,
                itemStyle: {
                    borderWidth: 10
                }
            },
            title: {
                show: true,
            },
            detail: {
                valueAnimation: false,
                fontSize: 20,
                offsetCenter: [0, '70%'],
                formatter: '{value}N'
            },
            data: [
                {
                    value: 0
                }
            ]
        }
    ]
};

const option3 = {
    series: [
        {
            type: 'gauge',
            min: 0,
            max: 100,
            progress: {
                show: true,
                width: 28
            },
            axisLine: {
                lineStyle: {
                    width: 28
                }
            },

            splitLine: {
                length: 25,
                distance: 0,
                lineStyle: {
                    width: 2,
                    color: '#999'
                }
            },
            axisLabel: {
                distance: 20,
                color: '#999',
                fontSize: 15,
                distance:-50
            },
            anchor: {
                show: true,
                showAbove: false,
                size: 10,
                itemStyle: {
                    borderWidth: 10
                }
            },
            title: {
                show: true,
            },
            detail: {
                valueAnimation: false,
                fontSize: 20,
                offsetCenter: [0, '70%'],
                formatter: '{value}%'
            },
            data: [
                {
                    value: 0
                }
            ]
        }
    ]
};

const option4 = {
    title: {
        text: '光照',
        textStyle:{
            color:'#fff',
        }
      },
      tooltip: {
        trigger: 'axis',
        axisPointer: {
          type: 'cross',
        }
      },
      legend: {
        data: [],
      },
      toolbox: {
        feature: {
          saveAsImage: {}
        }
      },
      grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
      },
      xAxis: [
        {
          type: 'category',
          boundaryGap: false,
          data: [],

        }
      ],
      yAxis: [
        {
          type: 'value',
          color:'#fff',
          textStyle:{
            color:'#fff',
        }
        }
      ],
      series: [
        {
          name: '光照',
          type: 'line',
          stack: 'Total',
          emphasis: {
            focus: 'series'
          },
          data: [200]
        }
      ]
};

myChart.setOption(option);
myChart2.setOption(option2);
myChart3.setOption(option3);
myChart4.setOption(option4);

var LightData=[]
setInterval(function () {
var PValue='{{ v[2][1] }}'
var HValue='{{ v[0][1] }}'
var TValue='{{ v[1][1] }}'
var LValue='{{ v[3][1] }}'

var data='{{ v }}';
    console.log(data)
console.log(LValue)
myChart.setOption({
      detail: {
      formatter: '{{ value }}℃'
      },
      series: [{
        data: [{
          value:TValue
        }]
      }]
});
myChart2.setOption({
      detail: {
      formatter: '{{ value }}N'
      },
      series: [{
        data: [{
          value:PValue
        }]
      }]
});
myChart3.setOption({
      detail: {
      formatter: '{{ value }}%'
      },
      series: [{
        data: [{
          value:HValue
        }]
      }]
});
<!--console.log(LightData)-->
if(LightData.length=8){
    LightData.shift()
    LightData.push(LValue)
}else{
    LightData.push(LValue)
}
myChart4.setOption({
      series: [{
        data:LightData
      }]
});
},2000);




</script>
</html>